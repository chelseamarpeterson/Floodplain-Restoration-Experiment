colnames(soil.c.data)[4:8] = c("MAOM-C","POM-C","SOC","TIC","TC")
# herbaceous species data
sp.richness.df = read.csv("Understory_Data/Species_Richness_by_Plot_and_Year.csv")
# average richness by year
sp.aves = sp.richness.df[which(sp.richness.df$Year == 2022),] %>%
group_by(Trt, Num) %>%
summarize(N = mean(N))
colnames(sp.aves) = c("trt","num","N.herb")
## read in tree species data
C.stock.sp.df = read.csv("Tree_Analysis/Clean_Data/WoodyBiomass_C_Stocks_By_Species.csv", header=T)
# get data for 2022
C.stock.sp.df.2022 = C.stock.sp.df[which(C.stock.sp.df$year == 2022),]
C.stock.sp.df = read.csv("Tree_Analysis/Clean_Data/WoodyBiomass_C_Stocks_By_Species.csv", header=T)
# get data for 2022
C.stock.sp.df.2022 = C.stock.sp.df[which(C.stock.sp.df$year == 2022),]
# make dataframe for unique tree species
n.t = 6; n.p = 3; nums = seq(1,3)
n.tree.sp.df = data.frame(matrix(nrow=n.t*n.p, ncol=3))
colnames(n.tree.sp.df) = c("trt","num","N.tree")
k = 1
for (t in 1:n.t) {
for (n in 1:n.p) {
tn.id = which(C.stock.sp.df.2022$trt == trts[t] & C.stock.sp.df.2022$num == nums[n])
tn.df = C.stock.sp.df.2022[tn.id,]
tn.sp = length(sort(unique(tn.df$spp)))
n.tree.sp.df[k, c("trt","num","N.tree")] = c(trts[t], as.numeric(nums[n]), as.numeric(tn.sp))
k = k + 1
}
}
View(n.tree.sp.df)
# add richness values to biomass data frame
c.data$num = as.numeric(c.data$num)
n.tree.sp.df$num = as.numeric(n.tree.sp.df$num)
n.tree.sp.df$N.tree = as.numeric(n.tree.sp.df$N.tree)
c.data = right_join(c.data, sp.aves, by=c("trt","num"))
c.data = right_join(c.data, n.tree.sp.df, by=c("trt","num"))
path_to_repo = "C:/Users/Chels/OneDrive - University of Illinois - Urbana/Ch1/Public-Repo"
setwd(path_to_repo)
# treatment labels
trts = c("A","B","C","D","E","R")
## read in woody biomass/debris and understory C stock data
c.data = read.csv("Tree_Analysis/Clean_Data/All_Vegetation_C_Stocks_By_Plot.csv")
## read in soil data
soil.data = read.csv("Soil_Analysis/Clean_Data/Soil_Data_Averaged_by_Plot_June2023.csv", header=T)
# update soil data column names
soil.c.data = soil.data[,c("trt","trt.full","num","maoc.stock","poc.stock","soc.stock","tic.stock","tc.stock")]
colnames(soil.c.data)[4:8] = c("MAOM-C","POM-C","SOC","TIC","TC")
## join vegetation and soil c stocks
c.data = right_join(c.data,
soil.c.data[,c("trt","trt.full","num","MAOM-C","POM-C","SOC","TIC","TC")],
by=c("trt","trt.full","num"))
## read in species richness data
# herbaceous species data
sp.richness.df = read.csv("Understory_Data/Species_Richness_by_Plot_and_Year.csv")
# average richness for 2022 to be consistent with biomass data
sp.aves = sp.richness.df[which(sp.richness.df$Year == 2022),] %>%
group_by(Trt, Num) %>%
summarize(N = mean(N))
colnames(sp.aves) = c("trt","num","N.herb")
## read in tree species data
C.stock.sp.df = read.csv("Tree_Analysis/Clean_Data/WoodyBiomass_C_Stocks_By_Species.csv", header=T)
# get data for 2022
C.stock.sp.df.2022 = C.stock.sp.df[which(C.stock.sp.df$year == 2022),]
# make dataframe for unique tree species
n.t = 6; n.p = 3; nums = seq(1,3)
n.tree.sp.df = data.frame(matrix(nrow=n.t*n.p, ncol=3))
colnames(n.tree.sp.df) = c("trt","num","N.tree")
k = 1
for (t in 1:n.t) {
for (n in 1:n.p) {
tn.id = which(C.stock.sp.df.2022$trt == trts[t] & C.stock.sp.df.2022$num == nums[n])
tn.df = C.stock.sp.df.2022[tn.id,]
tn.sp = length(sort(unique(tn.df$spp)))
n.tree.sp.df[k, c("trt","num","N.tree")] = c(trts[t], as.numeric(nums[n]), as.numeric(tn.sp))
k = k + 1
}
}
# add richness values to biomass data frame
c.data$num = as.numeric(c.data$num)
n.tree.sp.df$num = as.numeric(n.tree.sp.df$num)
n.tree.sp.df$N.tree = as.numeric(n.tree.sp.df$N.tree)
c.data = right_join(c.data, sp.aves, by=c("trt","num"))
c.data = right_join(c.data, n.tree.sp.df, by=c("trt","num"))
# write data to file
write.csv(c.data, "Tree_Analysis/Clean_Data/Clean_Veg_Soil_Cstocks_Richness.csv", row.names=F)
path_to_tree_folder = "C:/Users/Chels/OneDrive - University of Illinois - Urbana/Ch1/Public-Repo/Tree_Analysis"
path_to_repo = "C:/Users/Chels/OneDrive - University of Illinois - Urbana/Ch1/Public-Repo"
setwd(path_to_tree_folder)
library(readxl)
library(tidyr)
library(dplyr)
library(reshape2)
library(ggplot2)
library(rethinking)
library(allodb)
# treatment names
trts = c("A","B","C","D","E","R")
trt.names = c("Balled-and-burlapped","Bareroot","Seedling","Acorn","Seedbank","Reference")
n.trt = length(trts)
path_to_tree_folder = "C:/Users/Chels/OneDrive - University of Illinois - Urbana/Ch1/Public-Repo/Tree_Analysis"
path_to_repo = "C:/Users/Chels/OneDrive - University of Illinois - Urbana/Ch1/Public-Repo"
setwd(path_to_tree_folder)
library(readxl)
library(tidyr)
library(dplyr)
library(reshape2)
library(ggplot2)
library(rethinking)
library(allodb)
# treatment names
trts = c("A","B","C","D","E","R")
trt.names = c("Balled-and-burlapped","Bareroot","Seedling","Acorn","Seedbank","Reference")
n.trt = length(trts)
## statistical analyses on live and dead C stock components by plot ----
# read in biomass C stock estimates
veg.soil.df = read.csv("Clean_Veg_Soil_Cstocks_Richness.csv")
path_to_tree_folder = "C:/Users/Chels/OneDrive - University of Illinois - Urbana/Ch1/Public-Repo/Tree_Analysis"
path_to_repo = "C:/Users/Chels/OneDrive - University of Illinois - Urbana/Ch1/Public-Repo"
setwd(path_to_tree_folder)
library(readxl)
library(tidyr)
library(dplyr)
library(reshape2)
library(ggplot2)
library(rethinking)
library(allodb)
# treatment names
trts = c("A","B","C","D","E","R")
trt.names = c("Balled-and-burlapped","Bareroot","Seedling","Acorn","Seedbank","Reference")
n.trt = length(trts)
## statistical analyses on live and dead C stock components by plot ----
# read in biomass C stock estimates
veg.soil.df = read.csv("Clean_Data/Clean_Veg_Soil_Cstocks_Richness.csv")
# convert treatments into indices
veg.soil.df$tid = as.numeric(factor(veg.soil.df$trt))
path_to_tree_folder = "C:/Users/Chels/OneDrive - University of Illinois - Urbana/Ch1/Public-Repo/Tree_Analysis"
path_to_repo = "C:/Users/Chels/OneDrive - University of Illinois - Urbana/Ch1/Public-Repo"
setwd(path_to_tree_folder)
library(readxl)
library(tidyr)
library(dplyr)
library(reshape2)
library(ggplot2)
library(rethinking)
library(allodb)
# treatment names
trts = c("A","B","C","D","E","R")
trt.names = c("Balled-and-burlapped","Bareroot","Seedling","Acorn","Seedbank","Reference")
n.trt = length(trts)
## statistical analyses on live and dead C stock components by plot ----
# read in biomass C stock estimates
veg.soil.df = read.csv("Clean_Data/Clean_Veg_Soil_Cstocks_Richness.csv")
# variable names
vars = colnames(veg.soil.df)[4:25]
# convert treatments into indices
veg.soil.df$tid = as.numeric(factor(veg.soil.df$trt))
n.v = length(vars)
path_to_tree_folder = "C:/Users/Chels/OneDrive - University of Illinois - Urbana/Ch1/Public-Repo/Tree_Analysis"
path_to_repo = "C:/Users/Chels/OneDrive - University of Illinois - Urbana/Ch1/Public-Repo"
setwd(path_to_tree_folder)
library(readxl)
library(tidyr)
library(dplyr)
library(reshape2)
library(ggplot2)
library(rethinking)
library(allodb)
# treatment names
trts = c("A","B","C","D","E","R")
trt.names = c("Balled-and-burlapped","Bareroot","Seedling","Acorn","Seedbank","Reference")
n.trt = length(trts)
## statistical analyses on live and dead C stock components by plot ----
# read in biomass C stock estimates
veg.soil.df = read.csv("Clean_Data/Clean_Veg_Soil_Cstocks_Richness.csv")
# variable names
vars = colnames(veg.soil.df)[4:25]
n.v = length(vars)
# convert treatments into indices
veg.soil.df$tid = as.numeric(factor(veg.soil.df$trt))
# make simplified data lists
all.df = list()
all.mean = list()
all.sd = list()
for (i in 1:n.v) {
v = vars[i]
all.df[[v]] = list(tid = veg.soil.df$tid, y = veg.soil.df[,v]/mean(veg.soil.df[,v]))
all.mean[[v]] = mean(veg.soil.df[,v])
all.sd[[v]] = sd(veg.soil.df[,v])
}
set.seed(12)
m.all = list()
for (i in 1:n.v) {
v = vars[i]
m.all[[v]] = ulam(alist(y ~ dnorm(mu, sigma),
log(mu) <- a[tid],
a[tid] ~ dnorm(0, 1),
sigma ~ dexp(1)),
data = all.df[[v]], chains=5)
}
vars
# estimate aggregate C stocks in different pools
veg.soil.df$total.live.carbon =  veg.soil.df$live.woody.C.stock + veg.soil.df$live.stem.carbon + veg.soil.df$total.C.Mg.ha
veg.soil.df$total.dead.carbon =  veg.soil.df$snag.carbonmin + veg.soil.df$dead.stem.carbonmin + veg.soil.df$cwd.carbon + veg.soil.df$int.fwd.carbon + veg.soil.df$FWD.C.Mg.ha
# estimate aggregate C stocks in different pools
veg.soil.df$total.live.carbon =  veg.soil.df$live.woody.c.stock + veg.soil.df$live.stem.carbon + veg.soil.df$total.C.Mg.ha
veg.soil.df$total.dead.carbon =  veg.soil.df$snag.carbonmin + veg.soil.df$dead.stem.carbonmin + veg.soil.df$cwd.carbon + veg.soil.df$int.fwd.carbon + veg.soil.df$FWD.C.Mg.ha
# estimate aggregate C stocks in different pools
veg.soil.df$total.live.carbon =  veg.soil.df$live.woody.c.stock + veg.soil.df$live.stem.carbon + veg.soil.df$total.C.Mg.ha
veg.soil.df$total.dead.carbon =  veg.soil.df$snag.carbonmin + veg.soil.df$dead.stem.carbonmin + veg.soil.df$cwd.carbon + veg.soil.df$int.fwd.carbon + veg.soil.df$FWD.C.Mg.ha
veg.soil.df$total.veg.carbon = veg.soil.df$total.live.carbon + veg.soil.df$total.dead.carbon
veg.soil.df$total.ecosystem.carbon = veg.soil.df$TC + veg.soil.df$total.veg.carbon
veg.soil.df$n.total = veg.soil.df$N.herb + veg.soil.df$N.tree
# variable names
vars = colnames(veg.soil.df)[4:31]
vars
veg.soil.df = read.csv("Clean_Data/Clean_Veg_Soil_Cstocks_Richness.csv")
# estimate aggregate C stocks in different pools
veg.soil.df$total.live.carbon =  veg.soil.df$live.woody.c.stock + veg.soil.df$live.stem.carbon + veg.soil.df$total.C.Mg.ha
veg.soil.df$total.dead.carbon =  veg.soil.df$snag.carbonmin + veg.soil.df$dead.stem.carbonmin + veg.soil.df$cwd.carbon + veg.soil.df$int.fwd.carbon + veg.soil.df$FWD.C.Mg.ha
veg.soil.df$total.veg.carbon = veg.soil.df$total.live.carbon + veg.soil.df$total.dead.carbon
veg.soil.df$total.ecosystem.carbon = veg.soil.df$TC + veg.soil.df$total.veg.carbon
veg.soil.df$n.total = veg.soil.df$N.herb + veg.soil.df$N.tree
# variable names
vars = colnames(veg.soil.df)[4:30]
n.v = length(vars)
vars
n.v
# convert treatments into indices
veg.soil.df$tid = as.numeric(factor(veg.soil.df$trt))
all.df = list()
all.mean = list()
all.sd = list()
for (i in 1:n.v) {
v = vars[i]
all.df[[v]] = list(tid = veg.soil.df$tid, y = veg.soil.df[,v]/mean(veg.soil.df[,v]))
all.mean[[v]] = mean(veg.soil.df[,v])
all.sd[[v]] = sd(veg.soil.df[,v])
}
vars[26:30]
vars
vars[23:27]
n.v
m.all
for (i in 23:n.v) {
v = vars[i]
m.all[[v]] = ulam(alist(y ~ dnorm(mu, sigma),
log(mu) <- a[tid],
a[tid] ~ dnorm(0, 1),
sigma ~ dexp(1)),
data = all.df[[v]], chains=5)
}
vars
var.order = c("n.total","N.herb","N.tree",
"MAOM.C","POM.C","SOC","TIC","TC",
"int.fwd.carbon","cwd.carbon",
"snag.carbonmin","dead.stem.carbonmin",
"live.woody.c.stock","live.stem.carbon",
"FWD.C.Mg.ha","HL.C.Mg.ha","total.C.Mg.ha",
"total.live.carbon","total.dead.carbon",
"total.veg.carbon","total.ecosystem.carbon")
var.labels = c("Total richness","Herbaceous species","Tree species",
"MAOM-C (<53 um)","POM-C (>= 53 um)","TOC","TIC","TC",
"Fine woody debris (2.5-7.5 cm)","Coarse woody debris (>=7.6 cm)",
"Standing dead (>=2.5 cm)","Dead stems (<2.5 cm)",
"Woody biomass (>=2.5 cm)","Live stems (<2.5 cm)",
"Fine woody debris (<2.5 cm)","Herbaceous litter","Herbaceous biomass",
"Total live vegetation","Total dead vegetation",
"Total vegetation","Total ecosystem")
plots = paste(veg.soil.df$trt, veg.soil.df$num, sep="")
all.samples = list()
all.a = list()
all.sig = list()
all.mu = list()
a.df = data.frame(matrix(nrow=0, ncol=7))
colnames(a.df) = c("var",trts)
mu.sig.df = data.frame(matrix(nrow=0, ncol=20))
colnames(mu.sig.df) = c("var","sigma",plots)
plots = paste(veg.soil.df$trt, veg.soil.df$num, sep="")
all.samples = list()
all.a = list()
all.sig = list()
all.mu = list()
a.df = data.frame(matrix(nrow=0, ncol=7))
colnames(a.df) = c("var",trts)
mu.sig.df = data.frame(matrix(nrow=0, ncol=20))
colnames(mu.sig.df) = c("var","sigma",plots)
for (i in 1:n.v) {
v = var.order[i]
# store posterior samples in lists
all.samples[[v]] = extract.samples(m.all[[v]])
all.a[[v]] = exp(all.samples[[v]]$a) * all.mean[[v]]
all.sig[[v]] = exp(all.samples[[v]]$sigma) * all.mean[[v]]
all.mu[[v]] = all.samples[[v]]$mu * all.mean[[v]]
# add a's to dataframe
a.row = data.frame(all.a[[v]])
colnames(a.row) = trts
a.row$var = v
a.df = rbind(a.df, a.row[,c("var",trts)])
# add sigma and mu to dataframe
mu.sig.row = data.frame(all.mu[[v]])
colnames(mu.sig.row) = plots
mu.sig.row$var = v
mu.sig.row$sigma = as.vector(all.sig[[v]])
mu.sig.df = rbind(mu.sig.df, mu.sig.row[,c("var","sigma",plots)])
}
plots
plots = paste(veg.soil.df$trt, veg.soil.df$num, sep="")
all.samples = list()
all.a = list()
all.sig = list()
all.mu = list()
a.df = data.frame(matrix(nrow=0, ncol=7))
colnames(a.df) = c("var",trts)
mu.sig.df = data.frame(matrix(nrow=0, ncol=20))
colnames(mu.sig.df) = c("var","sigma",plots)
n.v
i = 1
v = var.order[i]
# store posterior samples in lists
all.samples[[v]] = extract.samples(m.all[[v]])
all.a[[v]] = exp(all.samples[[v]]$a) * all.mean[[v]]
all.sig[[v]] = exp(all.samples[[v]]$sigma) * all.mean[[v]]
all.mu[[v]] = all.samples[[v]]$mu * all.mean[[v]]
a.row = data.frame(all.a[[v]])
colnames(a.row) = trts
a.row$var = v
a.df = rbind(a.df, a.row[,c("var",trts)])
plots = paste(veg.soil.df$trt, veg.soil.df$num, sep="")
all.samples = list()
all.a = list()
all.sig = list()
all.mu = list()
a.df = data.frame(matrix(nrow=0, ncol=7))
colnames(a.df) = c("var",trts)
for (i in 1:n.v) {
v = var.order[i]
# store posterior samples in lists
all.samples[[v]] = extract.samples(m.all[[v]])
all.a[[v]] = exp(all.samples[[v]]$a) * all.mean[[v]]
all.sig[[v]] = exp(all.samples[[v]]$sigma) * all.mean[[v]]
all.mu[[v]] = all.samples[[v]]$mu * all.mean[[v]]
# add a's to dataframe
a.row = data.frame(all.a[[v]])
colnames(a.row) = trts
a.row$var = v
a.df = rbind(a.df, a.row[,c("var",trts)])
}
vars
var.order = c("n.total","N.herb","N.tree",
"MAOM.C","POM.C","SOC","TIC","TC",
"int.fwd.carbon","cwd.carbon",
"snag.carbonmin","dead.stem.carbonmin",
"live.woody.c.stock","live.stem.carbon",
"FWD.C.Mg.ha","HL.C.Mg.ha","total.C.Mg.ha",
"total.live.carbon","total.dead.carbon",
"total.veg.carbon","total.ecosystem.carbon")
var.labels = c("Total richness","Herbaceous species","Tree species",
"MAOM-C (<53 um)","POM-C (>= 53 um)","TOC","TIC","TC",
"Fine woody debris (2.5-7.5 cm)","Coarse woody debris (>=7.6 cm)",
"Standing dead (>=2.5 cm)","Dead stems (<2.5 cm)",
"Woody biomass (>=2.5 cm)","Live stems (<2.5 cm)",
"Fine woody debris (<2.5 cm)","Herbaceous litter","Herbaceous biomass",
"Total live vegetation","Total dead vegetation",
"Total vegetation","Total ecosystem")
n.v
plots = paste(veg.soil.df$trt, veg.soil.df$num, sep="")
all.samples = list()
all.a = list()
all.sig = list()
all.mu = list()
a.df = data.frame(matrix(nrow=0, ncol=7))
colnames(a.df) = c("var",trts)
for (i in 1:n.v) {
v = var.order[i]
# store posterior samples in lists
all.samples[[v]] = extract.samples(m.all[[v]])
all.a[[v]] = exp(all.samples[[v]]$a) * all.mean[[v]]
all.sig[[v]] = exp(all.samples[[v]]$sigma) * all.mean[[v]]
all.mu[[v]] = all.samples[[v]]$mu * all.mean[[v]]
# add a's to dataframe
a.row = data.frame(all.a[[v]])
colnames(a.row) = trts
a.row$var = var.labels[i]
a.df = rbind(a.df, a.row[,c("var",trts)])
}
all.samples = list()
all.a = list()
all.sig = list()
all.mu = list()
a.df = data.frame(matrix(nrow=0, ncol=7))
colnames(a.df) = c("var",trts)
for (i in 1:n.v) {
v = var.order[i]
print(v)
# store posterior samples in lists
all.samples[[v]] = extract.samples(m.all[[v]])
all.a[[v]] = exp(all.samples[[v]]$a) * all.mean[[v]]
all.sig[[v]] = exp(all.samples[[v]]$sigma) * all.mean[[v]]
all.mu[[v]] = all.samples[[v]]$mu * all.mean[[v]]
# add a's to dataframe
a.row = data.frame(all.a[[v]])
colnames(a.row) = trts
a.row$var = var.labels[i]
a.df = rbind(a.df, a.row[,c("var",trts)])
}
n.v.short = length(var.order)
all.samples = list()
all.a = list()
all.sig = list()
all.mu = list()
a.df = data.frame(matrix(nrow=0, ncol=7))
colnames(a.df) = c("var",trts)
n.v.short = length(var.order)
for (i in 1:n.v.short) {
v = var.order[i]
print(v)
# store posterior samples in lists
all.samples[[v]] = extract.samples(m.all[[v]])
all.a[[v]] = exp(all.samples[[v]]$a) * all.mean[[v]]
all.sig[[v]] = exp(all.samples[[v]]$sigma) * all.mean[[v]]
all.mu[[v]] = all.samples[[v]]$mu * all.mean[[v]]
# add a's to dataframe
a.row = data.frame(all.a[[v]])
colnames(a.row) = trts
a.row$var = var.labels[i]
a.df = rbind(a.df, a.row[,c("var",trts)])
}
var.lebsles
var.labels
new.df = all.a[["Total richness"]]
colnames(new.df) = trt.names
all.samples = list()
all.a = list()
all.sig = list()
all.mu = list()
a.df = data.frame(matrix(nrow=0, ncol=7))
colnames(a.df) = c("var",trts)
n.v.short = length(var.order)
for (i in 1:n.v.short) {
v1 = var.order[i]
v2 = var.labels[i]
# store posterior samples in lists
all.samples[[v2]] = extract.samples(m.all[[v1]])
all.a[[v2]] = exp(all.samples[[v1]]$a) * all.mean[[v1]]
all.sig[[v2]] = exp(all.samples[[v1]]$sigma) * all.mean[[v1]]
all.mu[[v2]] = all.samples[[v1]]$mu * all.mean[[v1]]
# add a's to dataframe
a.row = data.frame(all.a[[v2]])
colnames(a.row) = trts
a.row$var = var.labels[i]
a.df = rbind(a.df, a.row[,c("var",trts)])
}
# extract posterior samples and create dataframes
all.samples = list()
all.a = list()
all.sig = list()
all.mu = list()
a.df = data.frame(matrix(nrow=0, ncol=7))
colnames(a.df) = c("var",trts)
n.v.short = length(var.order)
for (i in 1:n.v.short) {
v1 = var.order[i]
v2 = var.labels[i]
# store posterior samples in lists
all.samples[[v2]] = extract.samples(m.all[[v1]])
all.a[[v2]] = exp(all.samples[[v2]]$a) * all.mean[[v1]]
all.sig[[v2]] = exp(all.samples[[v2]]$sigma) * all.mean[[v1]]
all.mu[[v2]] = all.samples[[v2]]$mu * all.mean[[v1]]
# add a's to dataframe
a.row = data.frame(all.a[[v2]])
colnames(a.row) = trts
a.row$var = var.labels[i]
a.df = rbind(a.df, a.row[,c("var",trts)])
}
new.df = all.a[["Total richness"]]
colnames(new.df) = trt.names
all.melt = melt(new.df, id.vars=trt.names)
all.melt$var = "Total richness"
all.melt = all.melt[,2:4]
colnames(all.melt) = c("trt","value","var")
for (v in var.labels[2:n.v.short]) {
new.df = all.a[[v]]
colnames(new.df) = trt.names
melt.df = melt(new.df, id.vars=trt.names)
melt.df$var = v
melt.df = melt.df[,2:4]
colnames(melt.df) = c("trt","value","var")
all.melt = rbind(all.melt, melt.df)
}
all.melt$var = factor(all.melt$var, levels=vars.labels)
new.df = all.a[["Total richness"]]
colnames(new.df) = trt.names
all.melt = melt(new.df, id.vars=trt.names)
all.melt$var = "Total richness"
all.melt = all.melt[,2:4]
colnames(all.melt) = c("trt","value","var")
for (v in var.labels[2:n.v.short]) {
new.df = all.a[[v]]
colnames(new.df) = trt.names
melt.df = melt(new.df, id.vars=trt.names)
melt.df$var = v
melt.df = melt.df[,2:4]
colnames(melt.df) = c("trt","value","var")
all.melt = rbind(all.melt, melt.df)
}
all.melt$var = factor(all.melt$var, levels=var.labels)
# plot posterior distributions
ggplot(all.melt, aes(x=value, fill=trt)) +
geom_density(alpha=0.5, linewidth=0.2) +
facet_wrap(.~var, scales = "free") +
labs(y="Density",x="") +
theme(legend.title=element_blank())
